---
title: Grokking Modern System Design - 분산 모니터링
date: 2024-07-08 22:20:00 +0900
categories: [System Design, Grokking Modern System Design]
published: true
tags:
  - System Design
  - Grokking Modern System Design
---

### 메트릭 및 알림

좋은 모니터링 시스템은 무엇을 어떤 단위로 측정할지 명확하게 정의(메트릭)한다.
또한 모니터링 시스템은 모든 메트릭의 임계값을 정의하고 값이 허용 범위를 벗어날 때 적절한 이해 관계자에게 알릴 수 있는 기능(알림)도 정의해야 한다.
인프라와 시스템의 상태를 알면 서비스 안정성이 보장된다.

#### 메트릭

메트릭은 우리가 무엇을 측정해야 하는지, 어떤 단위가 적절한지 객관적으로 정의한다.
예를 들어, 웹 서버가 초당 특정 양의 트래픽을 처리하는 능력이나 웹 서버 풀에 가입하는 능력은 구성 요소의 특정 목적이나 활동과 관련된 고수준 데이터의 예이다. 또 다른 예로는 처리량(초당 메가비트)과 대기 시간(왕복 시간) 측면에서 네트워크 성능을 측정하는 것이다.

#### 메트릭 채우기

메트릭은 글로벌 모니터링 및 경고 목적으로 논리적이게 중앙 집중화 되어야 한다.
메트릭을 가져오는 것은 모니터링 시스템에 매우 중요하다 메트릭은 사용자의 선호도에 따라 모니터링 시스템에 푸시하거나 풀링할 수 있다.

풀 전략에서 모니터링되는 각 서버는 단순히 메모리에 메트릭을 저장하고 노출된 엔드포인트로 전송하면 된다.
노출된 엔드포인트는 모니터링 애플리케이션이 메트릭을 직접 페치할 수 있도록 한다.
모니터링 시스템은 자체 일정에 따라 데이터를 풀 한다.

방화벽이 존재하여 모니터링 시스템이 서버에 직접 액세스하는 것을 막는 경우와 같이 다른 상황에서는 푸싱이 유익할 수 있다.
모니터링 시스템은 수집할 데이터와 서버 및 스위치가 데이터를 푸시해야 하는 간격에 대한 글로벌 구성을 조정할 수 있다.

#### 데이터 유지

모니터링되는 서버의 메트릭을 저장하는 방법을 파악하는 것이 중요하다.
모니터링할 항목이 수백만 개에 달하는 대규모 데이터 센터의 경우 저장할 데이터가 엄청나게 많을 것이고, 이때는 시계열 데이터베이스가 이와 관련하여 도움이 될 수 있다.

---

참고

- [Grokking Modern System Design Interview for Engineers & Managers](https://www.educative.io/courses/grokking-modern-system-design-interview-for-engineers-managers)

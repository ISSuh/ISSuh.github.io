<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Effective C++ - Item.8" /><meta property="og:locale" content="en" /><meta name="description" content="예외가 소멸자를 떠나지 못하도록 붙잡아 놓자" /><meta property="og:description" content="예외가 소멸자를 떠나지 못하도록 붙잡아 놓자" /><link rel="canonical" href="https://issuh.github.io/posts/effective_c++_item_8/" /><meta property="og:url" content="https://issuh.github.io/posts/effective_c++_item_8/" /><meta property="og:site_name" content="My Technical Diary" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-05-04T23:14:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Effective C++ - Item.8" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-05-04T23:14:00+09:00","datePublished":"2020-05-04T23:14:00+09:00","description":"예외가 소멸자를 떠나지 못하도록 붙잡아 놓자","headline":"Effective C++ - Item.8","mainEntityOfPage":{"@type":"WebPage","@id":"https://issuh.github.io/posts/effective_c++_item_8/"},"url":"https://issuh.github.io/posts/effective_c++_item_8/"}</script><title>Effective C++ - Item.8 | My Technical Diary</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="My Technical Diary"><meta name="application-name" content="My Technical Diary"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profile.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">My Technical Diary</a></div><div class="site-subtitle font-italic">ISSuh's tech blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/aboutme/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ISSuh" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yoyus5','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Effective C++ - Item.8</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Effective C++ - Item.8</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/ISSuh">ISSuh</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1588601640" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-05-04 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2116 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h1 id="예외가-소멸자를-떠나지-못하도록-붙잡아-놓자">예외가 소멸자를 떠나지 못하도록 붙잡아 놓자</h1><hr /><h2 id="내용"><span class="mr-2">내용</span><a href="#내용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="예외-발생시-소멸자의-입장"><span class="mr-2">예외 발생시 소멸자의 입장</span><a href="#예외-발생시-소멸자의-입장" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>소멸자에서 예외가 터져 나가는 경우를 C++ 언어에서 막는 것은 아니지만, 실제 상황을 들춰보면 확실히 프로그래머가 직접 막을 수 밖에 없다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Widget</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="o">~</span><span class="n">Widget</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

  <span class="p">...</span>

<span class="p">};</span>

<span class="kt">void</span> <span class="nf">doSomething</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
  
  <span class="p">...</span>

<span class="p">}</span>
</pre></table></code></div></div><p>vector 타입의 객체 v, 다시 말해 벡터 v가 소멸될 때, 자신이 가지고 있는 Widget들 전부를 소멸시킬 책임은 이 벡터에게 있다.</p><p>v에 들어 있는 Widget이 10개 일 때, 첫번째 것을 소멸시키는 도중에 예외가 발생했다고 가정한다. 나머지 9개는 여전히 소멸되어야 하므로(그렇지 않으면 이들이 가지고 있을지 모르는 자원이 누출된다), v는 이들에 대해 소멸자를 호출해야 할 것이다. 그런데 이 과정에서 문제가 또 발생했다고 했을때, 두 번째 Widget에 대해 호출된 소멸자에서 예외가 던져지면 어떻게 되는가? 현재 활성화된 예외가 동시에 두개나 만들어진 상태이고, C++의 입장에서는 감당하기에 버거워지는 문제가 발생하게 되는 것이다. 이 두 예외가 동시에 발생한 조건이 어떤 미묘한 조건이냐에 따라 프로그램 실행이 종료되는지 아니면 정의되지 않은 동작을 보이게 될 것인데, 이 경우에는 프로그램이 정의되지 않은 동작을 보이게 될 것이다.</p><p>이는 다른 STL 컨테이너 라든지 TR1 컨테이너, 심지어 배열을 써도 결과는 마찬가지 이다. 그러나 이러한 완전하지 못한 프로그램 종료나 미정의 동작이 발생하는 원인은, 컨테이너나 배열을 썻기 때문에 발생한 문제가 아니라 예외가 터져나오는 것을 내버려 두는 소멸자에게 있다.</p><h3 id="사용자측에서의-예외처리와-소멸자에서의-예외처리"><span class="mr-2">사용자측에서의 예외처리와 소멸자에서의 예외처리</span><a href="#사용자측에서의-예외처리와-소멸자에서의-예외처리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">DBConnection</span> <span class="p">{</span>
<span class="nl">public:</span>

  <span class="p">...</span>

  <span class="k">static</span> <span class="n">DBConnection</span> <span class="n">create</span><span class="p">();</span>   <span class="c1">// DBConnection 객체를 반환</span>

  <span class="kt">void</span> <span class="n">close</span><span class="p">();</span>                   <span class="c1">// 연결을 끊음. 이때, 연결이 실패하면 예외 발생</span>
<span class="p">};</span>
</pre></table></code></div></div><p>위 예제는 사용자가 DBConnection 객체에 대해 close를 직접 호출해야 하는 설계이다. 사용자의 실수를 사전에 차단하는 좋은 방법이라면 DBConnection에 대한 자원 관리 클래스를 만들어서 그 클래스의 소멸자에서 close를 호출하게 만드는 것이 있다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="c1">// DBConnection 객체의 관리 클래스</span>
<span class="k">class</span> <span class="nc">DBConn</span> <span class="p">{</span>
<span class="nl">public:</span>

  <span class="p">...</span>

  <span class="c1">// 연결이 항상 닫히도록 확실히 챙기는 소멸자</span>
  <span class="o">~</span><span class="n">DBConn</span><span class="p">()</span> <span class="p">{</span> <span class="n">db</span><span class="p">.</span><span class="n">close</span><span class="p">();</span> <span class="p">}</span>

<span class="nl">private:</span>
  <span class="n">DBConnection</span> <span class="n">db</span>
<span class="p">};</span>

<span class="p">...</span>


<span class="p">{</span>                                       <span class="c1">// 블록 시작</span>

  <span class="n">DBConn</span> <span class="n">dbc</span><span class="p">(</span><span class="n">DBConnection</span><span class="o">::</span><span class="n">create</span><span class="p">())</span>    <span class="c1">// DBConnection 객체를 생성하고,</span>
                                        <span class="c1">// 이를 DBConn 객체로 넘겨 관리를 위임</span>

  <span class="p">...</span>                                   <span class="c1">// DBConn 인터페이스를 통하여</span>
                                        <span class="c1">// DBConnection 객체를 사용</span>

<span class="p">}</span>                                       <span class="c1">// 블록의 끝</span>
                                        <span class="c1">// DBConn 객체가 소멸하고,</span>
                                        <span class="c1">// DBConnection 객체에 대한 </span>
                                        <span class="c1">// close 함수의 호출이 자동으로 이루어짐</span>
</pre></table></code></div></div><p>위 예제에서, close 일사천리로 성공하면 아무 문제될 것이 없는 코드이다. 그러나 close를 호출 했는데 여기서 예외가 발생했다고 가정하면 어떻게 될 것인가? DBConn의 소멸자는 분명히 이 예외를 전파할 것이다. 즉, 그 소멸자에서 예외가 나가도록 내버려 둔다는 것이다. 바로 이것이 문제이다. 예외를 던지는 소멸자는 곧 ‘걱정거리’를 의미하기 때문이다.</p><p>이를 피하는 방법은 두가지가 있다. DBConn의 소멸자는 이 두가지 방법중 하나를 선탱할 수 있을 것이다.</p><ul><li>close에서 예외가 발생하면 <strong>프로그램을 바로 종료한다.</strong> 대개 abort를 호출한다.<ul><li><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">DBConn</span><span class="o">::~</span><span class="n">DBConn</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">db</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">catch</span><span class="p">(</span> <span class="p">...</span> <span class="p">)</span> <span class="p">{</span>

    <span class="p">...</span>   <span class="c1">// close 호출이 실패했다는 로그 작성</span>

    <span class="n">std</span><span class="o">::</span><span class="n">abort</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div></ul><li>close를 호출한 곳에서 일어난 <strong>예외를 삼켜 버린다.</strong><ul><li><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">DBConn</span><span class="o">::~</span><span class="n">DBConn</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">db</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">catch</span><span class="p">(</span> <span class="p">...</span> <span class="p">)</span> <span class="p">{</span>

    <span class="p">...</span>   <span class="c1">// close 호출이 실패했다는 로그 작성</span>

  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div></ul></ul><p>대부분의 경우 예외 삼키기는 좋은 발상이 아니다. <em>무엇이 잘못되었는지</em>를 알려주는 정보와 같이 중요한 정보가 묻혀 버리기 때문이다. 그러나 때에 따라서는 불완전한 프로그램 종요 혹은 미정의 동작으로 인해 입는 위험을 감수하는 것 보다 그냥 예외를 먹어버리는 게 나을 수도 있다. 단, 이 ‘<em>예외 삼키기</em>‘가 제대로 빛을 보려면, 발생 한 예외를 그냥 무시한 뒤라도 프로그램이 쇤뢰성 있게 실행을 지속할 수 있어야 한다.</p><p>위의 두가지 선택방법 모두 문제점이 보이는 방법들이다. 중요한 것은 close가 최초로 예외를 던지게 된 요인에 대해 프로그램이 어떤 조치를 취할 수 있는가인데, 이러한 부분에 대한 대책이 전부한 상태이다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">DBConn</span> <span class="p">{</span>
<span class="nl">public:</span>
  
  <span class="kt">void</span> <span class="n">close</span><span class="p">()</span> <span class="p">{</span>      <span class="c1">// 사용자 호출을 위한 인터페이스 제공</span>
    <span class="n">db</span><span class="p">.</span><span class="n">close</span><span class="p">;</span>
    <span class="n">closed</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="o">~</span><span class="n">DBConn</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">closed</span><span class="p">)</span> <span class="p">{</span>     <span class="c1">// 사용자가 연결을 닫지 않았으면,</span>
                      <span class="c1">// 소멸자에서 닫는다</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="n">db</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">catch</span><span class="p">(...)</span> <span class="p">{</span>    <span class="c1">// 연결을 닫다가 실패하면,</span>
                      <span class="c1">// 실패를 알린후에</span>
                      <span class="c1">// 실행을 끝내거나 예외를 삼킨다</span>

        <span class="p">...</span>           <span class="c1">// close 호출이 실패했다는 로그 작성</span>
        
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="nl">private:</span>
  <span class="n">DBConnection</span> <span class="n">db</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">closed</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><p>close 호출의 책임을 DBConn의 소멸자에서 DBConn의 사용자로 떠넘기는 아이디어는 무책임한 책임전가로 보일 수 있다. 그러나, 어떤 동작이 예외를 일으키면서 실패할 가능성이 있고 또 그 예외를 처리해야 할 필요가 있다면, 그 예외는 <strong>소멸자가 아닌 다른 함수에서 비롯된 것이어야 한다</strong> 라는 것이 포인트 이다. 이유는 위에서 설명한 바와 같이 예외를 일으키는 소멸자는 시한폭탄이나 마찬가지라서 프로그램의 불완전 종료 혹은 미정의 동작의 위험을 내포하고 있기 때문이다.</p><p>위 예제에서 사용자가 호출할 수 있는 close 함수를 두고 있기는 하지만 부담을 떠넘기는 모양새가 아니다. 사용자에게 에러를 처리할 수 있는 기회를 주는 것이다. 이것 마저 없다면 사용자는 예외에 대처할 기회를 못잡게 된다. 물론 이 에러를 미리 처리할 것인지, 그냥 무시하여 DBConn의 소멸자에서 에러를 처리할 것인지 선택하는 것은 사용자의 몫이다.</p><h2 id="요점"><span class="mr-2">요점</span><a href="#요점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><blockquote><p>소멸자에서는 예외가 빠져나가면 안된다. 만약 소멸자 안에서 호출된 함수가 예외를 던질 가능성이 있다면, 어떤 예외이든지 소멸자에서 모두 받아낸 후에 삼켜 버리든지, 프로그램을 끝내든지 해야 한다.</p></blockquote><blockquote><p>어떤 클래스의 연산이 진행되다가 던진 예외에 대해 사용자가 반응해야할 필요가 있다면, 해당 연산을 제공하는 함수는 반드시 보통의 함수 즉, 소멸자가 아닌 함수 이여야 한다.</p></blockquote><hr /><hr /><p><em>참고</em>. Effective C++ 3/E - Scott Meyers</p><hr /></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/c/'>C++</a>, <a href='/categories/effective-c/'>Effective C++</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/c/" class="post-tag no-text-decoration" >C++</a> <a href="/tags/effective-c/" class="post-tag no-text-decoration" >Effective C++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Effective C++ - Item.8 - My Technical Diary&amp;url=https://issuh.github.io/posts/effective_c++_item_8/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Effective C++ - Item.8 - My Technical Diary&amp;u=https://issuh.github.io/posts/effective_c++_item_8/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://issuh.github.io/posts/effective_c++_item_8/&amp;text=Effective C++ - Item.8 - My Technical Diary" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/educative-distributed-system-10/">Distributed Systems - Coordination Patterns</a><li><a href="/posts/educative-distributed-system-04/">Distributed Systems - CAP</a><li><a href="/posts/educative-distributed-system-03/">Distributed Systems - Replication</a><li><a href="/posts/my_project_simpledb/">simpleDB - 메모리</a><li><a href="/posts/ps-hackerrank-01/">HackerRandk - Fraudulent Activity Notifications</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/effective_c++_item_1/"><div class="card-body"> <em class="timeago small" data-ts="1586535060" > 2020-04-11 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Effective C++ - Item.1</h3><div class="text-muted small"><p> C++를 언어들의 연합체로 바라보는 안목은 필수 오늘날의 C++는 다중패러다임 프로그래밍 언어(Multiparadigm Programming Language) 라고 불리운다. 절차적(Procedural) 프로그래밍 을 기본으로 하여 객체 지향(Object Oriented) , 함수식(Functional) , 일반화(Generic) 프로그래밍을 포함...</p></div></div></a></div><div class="card"> <a href="/posts/effective_c++_item_2/"><div class="card-body"> <em class="timeago small" data-ts="1586538180" > 2020-04-11 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Effective C++ - Item.2</h3><div class="text-muted small"><p> #define을 쓰려거든 const, enum, inline을 떠올리자 가급적 전처리기(Preprocessor) 보다 컴파일러를 가까이 하자   #define의 경우 전처리기에서 이미 치환시켜 값을 대입하기 때문에 컴파일러가 쓰는 기호 테이블에 값이 들어가지 않는다. 따라서 숫자 상수로 대체된 코드에서 컴파일 에러가 발생한다면 이를 디버깅하...</p></div></div></a></div><div class="card"> <a href="/posts/effective_c++_item_3/"><div class="card-body"> <em class="timeago small" data-ts="1588245780" > 2020-04-30 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Effective C++ - Item.3</h3><div class="text-muted small"><p> 낌새만 보이면 const를 들이대 보자! 내용 Const 키워드 const의 가장 눈에 띄는 특징이라면, const가 붙은 객체는 외부 변경을 불가능 하게 한다라는 ‘의미적인 제약’을 소스코드 수준에서 행해진다는 점과 컴파일러가 이 제약을 단단히 지켜준다는 점이다. const 키워드는 클래스 바깥에서 전역 혹은 네임스페이스 유효범위의 상수를...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/effective_c++_item_7/" class="btn btn-outline-primary" prompt="Older"><p>Effective C++ - Item.7</p></a> <a href="/posts/ps-leetcode-476/" class="btn btn-outline-primary" prompt="Newer"><p>LeetCode - 476. Number Complement</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/ISSuh">ISSuh</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-157715138-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-157715138-1'); }); </script>

<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Design Patterns - Singleton" /><meta property="og:locale" content="en" /><meta name="description" content="Creational Patterns - Singleton" /><meta property="og:description" content="Creational Patterns - Singleton" /><link rel="canonical" href="https://issuh.github.io/posts/design_patterns-singleton/" /><meta property="og:url" content="https://issuh.github.io/posts/design_patterns-singleton/" /><meta property="og:site_name" content="My Technical Diary" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-14T06:44:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Design Patterns - Singleton" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-05T12:33:07+09:00","datePublished":"2020-04-14T06:44:00+09:00","description":"Creational Patterns - Singleton","headline":"Design Patterns - Singleton","mainEntityOfPage":{"@type":"WebPage","@id":"https://issuh.github.io/posts/design_patterns-singleton/"},"url":"https://issuh.github.io/posts/design_patterns-singleton/"}</script><title>Design Patterns - Singleton | My Technical Diary</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="My Technical Diary"><meta name="application-name" content="My Technical Diary"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profile.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">My Technical Diary</a></div><div class="site-subtitle font-italic">ISSuh's tech blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/aboutme/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ISSuh" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yoyus5','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Design Patterns - Singleton</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Design Patterns - Singleton</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/ISSuh">ISSuh</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1586814240" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-04-14 </em> </span> <span> Updated <em class="timeago" data-ts="1646451187" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-05 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1907 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="creational-patterns---singleton">Creational Patterns - Singleton</h1><h2 id="intent"><span class="mr-2">Intent</span><a href="#intent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p>오직 한개의 클래스 인스턴스만을 갖도록 보장하고, 이에 대한 전역적인 접근점을 제공한다.</p><h2 id="utility"><span class="mr-2">Utility</span><a href="#utility" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><ul><li>클래스의 인스턴스가 오직 하나여야 함을 보장하고, 잘 정의된 접근점으로 모든 사용자가 접근할 수 있도록 할 때<li>유일한 인스턴스가 서브클래싱으로 확장되어야 하며, 사용자는 코드의 수정없이 확장된 서브클래스의 인스턴스를 사용할 수 있어야 할 때</ul><h2 id="structure"><span class="mr-2">Structure</span><a href="#structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><h3 id="basic-structure"><span class="mr-2">Basic Structure</span><a href="#basic-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/singl014.gif" alt="example" data-proofer-ignore></p><h3 id="elements"><span class="mr-2">Elements</span><a href="#elements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Singleton</strong><ul><li><em>Instance()</em> 연산을 정의하여, 유일한 인스턴스로 접근할 수 있도록 한다.<li>유일한 인스턴스를 생성하는 책임을 맡는다.</ul></ul><p>사용자는 <em>Singleton</em> 클래스에 정의된 <em>Instence()</em> 연산을 통해서 유일하게 생성된 <em>Singleton</em> 인스턴스에 접근할 수 있다.</p><h2 id="feature"><span class="mr-2">Feature</span><a href="#feature" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><h3 id="유일하게-존재하는-인스턴스로의-접근을-통제한다"><span class="mr-2">유일하게 존재하는 인스턴스로의 접근을 통제한다</span><a href="#유일하게-존재하는-인스턴스로의-접근을-통제한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><em>Singleton</em> 클래스 자체가 인스턴스를 캡슐화하기 때문에, 이 클래스에서 사용자가 언제, 어떻게 이 인스턴스에 접근할 수 있는지를 제어 가능하다.</p><h3 id="이름-공간name-space을-좁힌다"><span class="mr-2">이름 공간(name space)을 좁힌다</span><a href="#이름-공간name-space을-좁힌다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>전역 변수를 사용하여 이름 공간을 망치는 일이 없기 때문에, 전역 변수를 정의하여 발생하는 디버깅의 어려움 등의 문제를 없앨수 있다.</p><h3 id="연산-및-표현의-정제를-허용한다"><span class="mr-2">연산 및 표현의 정제를 허용한다</span><a href="#연산-및-표현의-정제를-허용한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><em>Singleton</em> 클래스는 상속될 수 있기 때문에, 이 상속된 서브클래스를 통해서 새로운 인스턴스를 만들수 있다.</p><p>런타임에 필요한 클래스의 인스턴스를 사용하여 응용프로그램을 구성하는 것도 가능하다.</p><h3 id="인스턴스의-갯수를-변경하기가-자유롭다"><span class="mr-2">인스턴스의 갯수를 변경하기가 자유롭다</span><a href="#인스턴스의-갯수를-변경하기가-자유롭다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><em>Singleton</em> 클래스의 인스턴스에 접근할 수 있는 허용 범위를 결정하는 연산만 추가하면 되기 때문에, 인스턴스 생성 갯수에 대한 변경이 유연하다.</p><h3 id="클래스-연산을-사용하는-것보다-훨씬-유연한-방법이다"><span class="mr-2">클래스 연산을 사용하는 것보다 훨씬 유연한 방법이다</span><a href="#클래스-연산을-사용하는-것보다-훨씬-유연한-방법이다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>C++에서 <em>Singleton Pattern</em>과 동일한 기능을 발휘하는 방법이 <em>static member function</em>을 활용하여, 클래스 연산을 통해 구현하는 방법이 있다. 그러나 <em>static member function</em>는 가상 함수가 아니므로, 서브클래스들이 이 연산을 오버라이드 할 수 없다.</p><h2 id="implementation"><span class="mr-2">Implementation</span><a href="#implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><h3 id="implementation-method"><span class="mr-2">Implementation Method</span><a href="#implementation-method" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="인스턴스가-유일해야-함을-보장한다"><span class="mr-2">인스턴스가 유일해야 함을 보장한다</span><a href="#인스턴스가-유일해야-함을-보장한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p><em>Singleton Pattern</em>은 클래스의 인스턴스가 오로지 하나임을 보장해야 한다.</p><p>C++에서 <em>Singleton Pattern</em>을 구현하기 위해선, <em>static member function</em>을 활용한다.</p><p><em>Singleton</em> 클래스에 <em>Instance()</em> 연산을 <em>static member function</em>으로 정의하여 클래스 연산을 정의한다.<br /> <em>Singleton</em> 클래스는 또한 <em>static member variable</em>로 <em>m_instance</em>를 정의하여 실제로 생성될 유일한 인스턴스에 대한 참조자를 가지도록 한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Singleton</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">Instance</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_instance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
      <span class="c1">// 처음 접근할시, 새로운 인스턴스 생성</span>
      <span class="n">m_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">m_instance</span><span class="p">;</span>
  <span class="p">}</span>

<span class="nl">protected:</span>
  <span class="c1">// 생성자를 protected로 선언하여</span>
  <span class="c1">// Instance() 이외의 접근을 막음</span>
  <span class="n">Singleton</span><span class="p">();</span>

<span class="nl">private:</span>
  <span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">m_instance</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">Singleton</span><span class="o">*</span> <span class="n">Singleton</span><span class="o">::</span><span class="n">m_instance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></table></code></div></div><p>C++를 사용한 구현에서 주의해야 할 것은, <em>Singleton</em>을 전역 변수나 정적 객체로 정의하고 이를 자동 초기화하는 것만으로는 충분하지 않다는 것이다. 그 이유는 아래와 같다.</p><ul><li>정적 객체의 유일한 인스턴스만 선언되리라는 보장을 할 수 없다.<ul><li>정적 객체에서 인스턴스를 얻는 선언문이 프로그램 다른 부분에 존재하더라도 이를 확인하고 방지할 방법이 없다.</ul><li>정적 초기화 시점에 모든 <em>Singleton</em>을 인스턴스화하기 위해 필요한 정보가 없을 수도 있다.<ul><li><em>Singleton</em>은 프로그램 실행 중간에 계산으로 자신의 값이 결정될 수 있다. 그러나 정적으로 선언된 객체라면 그 내부에 정의된 변수의 값을 처음에만 정의할 수 있지, 나중에 다시 변결할 수 없다.</ul><li>C++에서는 전역 객체에 대한 생성자를 언제 호출하는지에 대한 명확한 순서를 정의하지 않는다.</ul><p>또한 전역 객체나 정적 객체의 또 다른 문제점은 모든 <em>Singleton</em>의 사용 여부와 상관없이 일단 모두 생성된다는 점이다. 그러나 <em>static member function</em> 기법을 이용하면 실제 호출이 일어나는 시점에서 객체를 생성하는 것이 가능하다.</p><h4 id="singleton-클래스를-서브클래싱-한다"><span class="mr-2">Singleton 클래스를 서브클래싱 한다</span><a href="#singleton-클래스를-서브클래싱-한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>핵심은 <em>Singleton</em>의 인스턴스를 참조하는 변수가 이들 서브클래스의 인스턴스로 초기화 되어야 한다는 것이다.</p><p>가장 쉬운 방법은 <em>Singleton</em> 클래스의 <em>Instance()</em> 연산을 사용할 때 어떤 <em>Singleton</em>을 사용할지 결정하는 것으로, 수퍼클래스의 <em>Singleton</em>을 사용할지, 서브클래스의 <em>Singleton</em>을 사용할지를 결정한다.</p><p>두번째 방법은 <em>Instance()</em> 연산의 구현을 슈퍼클래스가 아닌 서브클래스에서 하는 것이다. 이는 <em>Singleton</em>의 구현 클래스를 연결 시점에 결정할 수 있게 대준다.</p><p>좀더 유연한 방법은 <strong><em>Singleton</em>에 대한 레지스트리</strong>를 사용하는 것이다. <em>Instance()</em> 연산에 가능한 <em>Singleton</em> 클래스 클래스 집합을 정의하는 대신에 <em>Singleton</em> 클래스는 이 <em>Singleton</em> 인스턴스를 레지스트리에 이름을 가지는 인스턴스로 등록한다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Singleton</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">static</span> <span class="kt">void</span> <span class="n">Register</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span> <span class="n">Singlton</span><span class="o">*</span><span class="p">);</span>
  
  <span class="k">static</span> <span class="n">Singlton</span><span class="o">*</span> <span class="n">Instance</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_instance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
      <span class="c1">// 사용자 또는 환경변수는 시작 시에 이것을 지원한다</span>
      <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">singletonName</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s">"SINGLETON"</span><span class="p">);</span>
      
      <span class="c1">// 해당하는 Singleton이 없다면 0을 반환</span>
      <span class="n">m_instance</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">singletonName</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">m_instance</span><span class="p">;</span>
  <span class="p">}</span>

<span class="nl">protected:</span>
  <span class="k">static</span> <span class="n">Singlton</span><span class="o">*</span> <span class="n">Lookup</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">);</span>

<span class="nl">private:</span>
  <span class="k">static</span> <span class="n">Singlton</span><span class="o">*</span> <span class="n">m_instance</span><span class="p">;</span>
  <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">List</span><span class="o">&lt;</span><span class="n">NameSingletonPair</span><span class="o">&gt;*</span> <span class="n">m_registry</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><p><em>Singleton</em> 클래스가 자신을 어디에 등록할지에 대한 방법은 여러 방법이 있다.</p><p>그중 한가지 방법은 생성자 이다. 예를 들어, <em>MySingleton</em>이라는 서브클래스는 다음과 같이 구현이 가능하다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">MySingleton</span><span class="o">::</span><span class="n">MySingleton</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
  
  <span class="n">Singleton</span><span class="o">::</span><span class="n">Register</span><span class="p">(</span><span class="s">"MySingleton"</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  
  <span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><p>생성자는 누군가가 자신을 생성하지 않는 한 호출되지 않는 연산이기 때문에, 이 문제를 해결하기 위해 <em>MySingleton</em> 인스턴스를 정적 객체로 정의한다.</p><h3 id="implementation-example"><span class="mr-2">Implementation Example</span><a href="#implementation-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="cm">/**
* @brief SuperClass Singleton - Display
*/</span>
<span class="k">class</span> <span class="nc">Singleton</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">Singleton</span><span class="p">()</span> <span class="p">{}</span>

  <span class="n">Singleton</span><span class="p">(</span><span class="k">const</span> <span class="n">Singleton</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
  <span class="n">Singleton</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="n">Singleton</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>

  <span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">getInstance</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_instance</span> <span class="o">==</span> <span class="nb">nullptr</span><span class="p">){</span>
      <span class="n">m_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">m_instance</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">printInfo</span><span class="p">()</span> <span class="p">{}</span>
  
<span class="nl">protected:</span>
  <span class="n">Singleton</span><span class="p">();</span>

<span class="nl">private:</span>
  <span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">m_instance</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">Singleton</span><span class="o">*</span> <span class="n">Singleton</span><span class="o">::</span><span class="n">m_instance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">...</span>

  <span class="n">Singleton</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">printInfo</span><span class="p">();</span>

<span class="p">...</span>

</pre></table></code></div></div><h2 id="related-pattern"><span class="mr-2">Related Pattern</span><a href="#related-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p><em>Abstract Factory Pattern</em>, <em>Builder Pattern</em>, <em>Prototype Pattern</em>등 많은 패턴들이 <em>Singleton Pattern</em>으로 구현될 수 이다.</p><hr /><hr /><p><em>참고</em>. Design Patterns : Elements of Reusable Object-Oriented Software - Erich Gamma</p><hr /></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/design-patterns/'>Design Patterns</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-patterns/" class="post-tag no-text-decoration" >Design Patterns</a> <a href="/tags/creational-patterns/" class="post-tag no-text-decoration" >Creational Patterns</a> <a href="/tags/singleton/" class="post-tag no-text-decoration" >Singleton</a> <a href="/tags/c/" class="post-tag no-text-decoration" >C++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Design Patterns - Singleton - My Technical Diary&amp;url=https://issuh.github.io/posts/design_patterns-singleton/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Design Patterns - Singleton - My Technical Diary&amp;u=https://issuh.github.io/posts/design_patterns-singleton/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://issuh.github.io/posts/design_patterns-singleton/&amp;text=Design Patterns - Singleton - My Technical Diary" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/educative-distributed-system-10/">Distributed Systems - Coordination Patterns</a><li><a href="/posts/educative-distributed-system-04/">Distributed Systems - CAP</a><li><a href="/posts/educative-distributed-system-03/">Distributed Systems - Replication</a><li><a href="/posts/my_project_simpledb/">simpleDB - 메모리</a><li><a href="/posts/ps-hackerrank-01/">HackerRandk - Fraudulent Activity Notifications</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/design_patterns-abstract_factory/"><div class="card-body"> <em class="timeago small" data-ts="1586380560" > 2020-04-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Abstract Factory</h3><div class="text-muted small"><p> Creational Patterns - Abstract Factory Intent 상세화된 서브클래스를 정의하지 않고도 서로 관련성이 있거나 독립적인 여러 객체의 군을 생성하기 위한 인터페이스를 제공 Utility 객체가 생성되거나 구성, 표현되는 방식과 무관하게 시스템을 독립적으로 만들고자 할때 여러 제품들중 하나를 선택해서 시스템을...</p></div></div></a></div><div class="card"> <a href="/posts/design_patterns-builder/"><div class="card-body"> <em class="timeago small" data-ts="1586465520" > 2020-04-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Builder</h3><div class="text-muted small"><p> Creational Patterns - Builder Intent 복잡한 객체를 생성하는 방법과 표현하는 방법을 정의하는 클래스를 별도로 분리하여, 서로 다른 표현이라도 이를 생성할 수 있는 동일한 절차를 제공할수 있도록 함 Utility 복합 객체를 생성하는 알고리즘이 객체를 구성하는 요소 부분과 이들을 조립하는 방법에 독립적일 때 ...</p></div></div></a></div><div class="card"> <a href="/posts/design_patterns-factory_method/"><div class="card-body"> <em class="timeago small" data-ts="1586606640" > 2020-04-11 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Factory Method</h3><div class="text-muted small"><p> Creational Patterns - Factory Method Intent 객페를 생성하기 위해 인터페이스를 정의하지만, 어떤 클래스의 인스턴스를 생성할지에 대한 결정은 서브클래스가 하도록 한다. 때때로 Factory Method는 Virtual Constructor라고도 불린다. Utility 어떤 클래스가 자신이 생성해야 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/design_patterns-prototype/" class="btn btn-outline-primary" prompt="Older"><p>Design Patterns - Prototype</p></a> <a href="/posts/design_patterns-adapter/" class="btn btn-outline-primary" prompt="Newer"><p>Design Patterns - Adapter</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/ISSuh">ISSuh</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-157715138-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-157715138-1'); }); </script>

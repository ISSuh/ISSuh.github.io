<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Design Patterns - Chain of Responsibility" /><meta property="og:locale" content="en" /><meta name="description" content="Behavioral Patterns - Chain of Responsibility" /><meta property="og:description" content="Behavioral Patterns - Chain of Responsibility" /><link rel="canonical" href="https://issuh.github.io/posts/design_patterns-chain_of_responsibility/" /><meta property="og:url" content="https://issuh.github.io/posts/design_patterns-chain_of_responsibility/" /><meta property="og:site_name" content="My Technical Diary" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-21T02:19:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Design Patterns - Chain of Responsibility" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-05T12:33:07+09:00","datePublished":"2020-04-21T02:19:00+09:00","description":"Behavioral Patterns - Chain of Responsibility","headline":"Design Patterns - Chain of Responsibility","mainEntityOfPage":{"@type":"WebPage","@id":"https://issuh.github.io/posts/design_patterns-chain_of_responsibility/"},"url":"https://issuh.github.io/posts/design_patterns-chain_of_responsibility/"}</script><title>Design Patterns - Chain of Responsibility | My Technical Diary</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="My Technical Diary"><meta name="application-name" content="My Technical Diary"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profile.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">My Technical Diary</a></div><div class="site-subtitle font-italic">ISSuh's tech blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/aboutme/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ISSuh" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yoyus5','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Design Patterns - Chain of Responsibility</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Design Patterns - Chain of Responsibility</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/ISSuh">ISSuh</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1587403140" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-04-21 </em> </span> <span> Updated <em class="timeago" data-ts="1646451187" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-05 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2691 words"> <em>14 min</em> read</span></div></div></div><div class="post-content"><h1 id="behavioral-patterns---chain-of-responsibility">Behavioral Patterns - Chain of Responsibility</h1><h2 id="intent"><span class="mr-2">Intent</span><a href="#intent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p>메세지를 보내는 객체와 이를 받아 처리하는 객체들 간의 결합도를 없애기 위한 패턴이다.</p><p>하나의 요청에 대한 처리가 반드시 한 객체에서만 되지 않고, 여러 객체에게 그 처리 기회를 주려는 것이다.</p><h2 id="utility"><span class="mr-2">Utility</span><a href="#utility" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><ul><li>하나 이상의 객체가 요청을 처리해야 하고, 그 요청 처리자 중 어떤 것이 <em>선행자(Priori)</em> 인지 모를 때.<ul><li>처리자가 자동으로 확정되어야 한다.</ul><li>메세지를 받을 객체를 명시하지 않은 채 여러 객체 중 하나에게 처리를 요청하고 싶은 때<li>요청을 처리할 수 있는 객체 집합이 동적으로 정의되어야 할 때</ul><h2 id="structure"><span class="mr-2">Structure</span><a href="#structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><h3 id="basic-structure"><span class="mr-2">Basic Structure</span><a href="#basic-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/chain094.gif" alt="example" data-proofer-ignore></p><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/chain089.gif" alt="example" data-proofer-ignore></p><h3 id="structure-example"><span class="mr-2">Structure Example</span><a href="#structure-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/chain090.gif" alt="example" data-proofer-ignore></p><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/chain091.gif" alt="example" data-proofer-ignore></p><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/chain092.gif" alt="example" data-proofer-ignore></p><h3 id="elements"><span class="mr-2">Elements</span><a href="#elements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Handler</strong><ul><li><em>HelpHandler</em>에 해당<li>요청을 처리하는 인터페이스를 정의<li>후속 처리자(<em>successor</em>)와 연결을 구현<li>연결 고리에 연결된 다음 객체에게 다시 메세지를 보냄</ul><li><strong>ConcreteHandler</strong><ul><li><em>PrintButton</em>, <em>PrintDialog</em>에 해당<li>책임져야 할 행동이 있다면 스스로 요청을 처리하여 후속 처리자에 접근<li>자신이 처리할 행동이 있으면 처리하고, 그렇지 않으면 후속 처리자에 다시 처리를 요청</ul><li><strong>Client</strong><ul><li>객체에게 필요한 요청을 보냄</ul></ul><p>사용자는 처리를 요청하고, 이 처리 요청은 실제로 그 요청을 받을 책임이 있는 <em>ConcreteHandler</em> 객체를 만날 때까지 정의된 연결 고리를 따라서 계속 전달된다.</p><h2 id="feature"><span class="mr-2">Feature</span><a href="#feature" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><h3 id="객체-간의-행동적-결합도가-적어짐"><span class="mr-2">객체 간의 행동적 결합도가 적어짐</span><a href="#객체-간의-행동적-결합도가-적어짐" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>다른 객체가 요청을 어떻게 처리하는지 몰라도 된다. 단지 요청을 보내는 객체는 이 메세지가 적절하게 처리될 것이라는 바램만 있으면 된다. 메세지를 보내는 쪽이나 받는 쪽 모두 서로를 모르고, 또 연결된 객체들 조차도 그 연결 구조가 어떻게 되는지 모른다. 자신은 단순하게 자신과 연결된 단 하나의 후보 객체만 알면 된다.</p><p>결과적으로 이 패턴은 객체들 간의 상호작용 과정을 단순화 시킨다.</p><h3 id="객체에게-책임을-할당하는-것에-대한-유연성-증가"><span class="mr-2">객체에게 책임을 할당하는 것에 대한 유연성 증가</span><a href="#객체에게-책임을-할당하는-것에-대한-유연성-증가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>객체의 책임을 여러 객체에게 분산 시킬수 있으므로 런타임에 객체 연결 고리를 변경하거나 추가하여 책임을 변경하거나 확장 할 수 있다.</p><h3 id="메세지-수신이-보장되지-않음"><span class="mr-2">메세지 수신이 보장되지 않음</span><a href="#메세지-수신이-보장되지-않음" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>어떤 객체가 이 처리에 대한 수신을 담당한다는 것을 명시하지 않았으므로 요청이 처리된다는 보장이 없다. 만약 객체들 간의 연결 고리가 잘 정의되지 않는다면, 요청을 처리되지 못한 채로 버려질 수 있다.</p><h2 id="implementation"><span class="mr-2">Implementation</span><a href="#implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><h3 id="considerations-point-in-implementaion"><span class="mr-2">Considerations point in implementaion</span><a href="#considerations-point-in-implementaion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="후속-처리자들의-연결-고리-구현"><span class="mr-2">후속 처리자들의 연결 고리 구현</span><a href="#후속-처리자들의-연결-고리-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>후속 처리자들의 연결 고리를 구현하는 방법에는 크게 두가지가 있다.</p><ul><li>새로운 연결을 만드는 것<ul><li>일반적으로는 <em>Handler</em> 클래스에 정의하지만, <em>ConcreteHandler</em> 클래스에 정의할 수도 있다.</ul><li>이미 있는 연결 정보를 사용하는 것</ul><p>기존 연결을 사용하는 방법은 그 연결이 지금 필요한 연결 정보를 제공할 떄 적절한 방법이다. 명시적으로 별도의 연결 정보를 정의할 필요가 없기 때문이다. 그러나 필요한 연결 고리를 정의할 수 없을 떄라면 중복되더라도 별도의 연결 정보를 위한 변수를 정의해야 한다.</p><h4 id="후속-처리자-연결"><span class="mr-2">후속 처리자 연결</span><a href="#후속-처리자-연결" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>연결 정보를 정의하기 위해 미리 정의된 참조자가 없다면 직접 정의해야 한다. 이때 <em>Handler</em> 클래스는 요청 처리에 대한 인터페이스를 정의할 뿐만 아니라, 후속 처리자에 대한 정보 저장의 인스턴스 변수도 정의해야한다. 이 정보를 이용하여 <em>Handler</em> 클래스의 기본 구현은 자신의 후속 처리자로 정의된 객체에 <em>HandleRequest()</em> 메세지를 전달하도록 만든다.</p><p><em>ConcreteHandler</em> 서브클래스가 요청받은 메세지에 대해 처리할 내용이 없으면, 기반 클래스에 정의된 구현을 재정의 할 필요 없이 자신의 후속 처리자로 정의된 객체에 메세지를 그대로 전달하면 된다.</p><p>후속 처리자에 대한 연결을 유지하는 <em>HelpHandler</em>의 기본 클래스의 예는 아래와 같다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">HelpHandler</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">HelpHandler</span><span class="p">(</span><span class="n">HelpHandler</span><span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="o">:</span> <span class="n">_successor</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">{}</span>
  
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">HelpHandle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">_successor</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">_successor</span><span class="o">-&gt;</span><span class="n">HandleHelp</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="nl">private:</span>
  <span class="n">HelpHandler</span><span class="o">*</span> <span class="n">_successor</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h4 id="처리-요청의-표현부를-정의"><span class="mr-2">처리 요청의 표현부를 정의</span><a href="#처리-요청의-표현부를-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>처리 요청을 정의하는 방법에는 여러가지가 있다.</p><p>첫번째 방안은, 처리를 코드화 하여 개매변수로 받아들이도록 하는 처리자 함수를 하나만 정의하는 것이다. 이렇게 하면 얼마든지 처리 요철을 정의할 수 있다. 이와같이 구현하기 위해선, 메세지 송신과 수신 측 사이에 처리 요청을 어떨게 코드로 만들지에 대해 서로 규약을 정의해야 한다.</p><p>두번째 방안은, 코드에 따라서 대응하는 처리 요청을 발생시키기 위해 조건문을 정의한다. 만약 매개변수를 전송할 안정적인 방법이 없다면 수동으로 매개변수를 만들고 해석해야 한다. 그러나 이 방법은 정의한 연산을 직접 호출하는 방법보다 안전하지 못하다.</p><p>세번째 방안은, 매개변수 전송문제를 처리하기 위해, 매개변수를 묶어 별도의 객체로 만드는 것이다. 예를들어, <em>Request</em> 클래스를 이용해서 처리 요청을 명시적으로 정의한다. 만약 새로운 처리 요청이 발생하면, <em>Request</em> 서브클래스로 정의하면 된다. 상속을 이용해서 서로 다른 매개변수를 정의하는 것이다. <em>Handle</em>은 어떤 종류의 처리 요청인지만 알면 필요한 매개변수에 접근할 수 있다.</p><p>처리요청을 식별하기 위해서 <em>Request</em> 클래스는 클래스에 대한 식별자를 반환하는 멤버 함수를 정이해야 한다. 그렇게 되면, 메세지 수신 측에서 런타임의 타입 정보를 이용할 수 있다. 그러나 이 방법은 언어가 런타임에 타입 정보를 제공하는 기능이 있어야 한다.</p><p>다음 예는 처리 요청을 식별하기 위해 <em>Request</em> 객체를 사용하는 디스패처(dispatch) 함수의 바탕이다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="n">Handler</span><span class="o">::</span><span class="n">HandleRequest</span><span class="p">(</span><span class="n">Request</span><span class="o">*</span> <span class="n">theRequest</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="n">theRequest</span><span class="o">-&gt;</span><span class="n">GetKind</span><span class="p">())</span> <span class="p">{</span>
  <span class="k">case</span> <span class="n">Help</span><span class="p">:</span>
    <span class="c1">// 인지를 적당한 타입으로 변경</span>
    <span class="n">HandleHelp</span><span class="p">((</span><span class="n">HelpRequest</span><span class="o">*</span> <span class="n">theRequest</span><span class="p">));</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="n">Print</span><span class="p">:</span>
    <span class="c1">// 인지를 적당한 타입으로 변경</span>
    <span class="n">HandlePrint</span><span class="p">((</span><span class="n">PrintRequest</span><span class="o">*</span><span class="p">)</span> <span class="n">theRequest</span><span class="p">);</span>
    <span class="c1">// ...</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="nl">default:</span>
    <span class="c1">// ...</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 예시의 <em>HandleRequest()</em> 연산을 상속한 후 재정의 하면 새로운 처리 방법을 구현할 수 있다. 서브클래스는 관심있는 처리 요청만 담당하도록 정의하면 된다. 다른 처리 요청은 기반 클래스에서 정의된 대로 처리하면 된다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">ExtendedHandler</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Handler</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">HandleRequest</span><span class="p">(</span><span class="n">Request</span><span class="o">*</span> <span class="n">theRequest</span><span class="p">){</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">theRequest</span><span class="o">-&gt;</span><span class="n">GetKind</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">Preview</span><span class="p">:</span>
      <span class="c1">// 요청 처리</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="nl">default:</span>
      <span class="c1">// 기반 클래스인 Handler가 다른 요청 처리</span>
      <span class="n">Handle</span><span class="o">::</span><span class="n">HandleRequest</span><span class="p">(</span><span class="n">theRequest</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="p">...</span>

<span class="p">};</span>
</pre></table></code></div></div><h3 id="implement-example"><span class="mr-2">Implement Example</span><a href="#implement-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
</pre><td class="rouge-code"><pre>
<span class="k">enum</span> <span class="k">class</span> <span class="nc">EVENT</span> <span class="o">:</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="n">BUTTON_PRESS</span><span class="p">,</span>
  <span class="n">BUTTON_RELEASE</span><span class="p">,</span>
  <span class="n">WINDOW_SHOW</span><span class="p">,</span>
  <span class="n">WINDOW_HIDE</span><span class="p">,</span>
  <span class="n">ON_REGIST</span><span class="p">,</span>
  <span class="p">...</span>

<span class="p">}</span>

<span class="cm">/**
* @brief Handler - EventHandler
* @details 요청을 처리하기 위한 인터페이스 정의
*/</span>
<span class="k">class</span> <span class="nc">EventHandler</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">EventHandler</span><span class="p">(</span><span class="n">EventHandler</span><span class="o">*</span> <span class="n">sub</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">m_evnetHandler</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="p">{}</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">EventHandler</span><span class="p">()</span> <span class="p">{}</span>

  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">handler</span><span class="p">(</span><span class="n">EVENT</span> <span class="n">eventCode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_evnetHandler</span> <span class="o">!=</span> <span class="nb">nullptr</span><span class="p">)</span>
      <span class="n">m_evnetHandler</span><span class="o">-&gt;</span><span class="n">handler</span><span class="p">(</span><span class="n">eventCode</span><span class="p">);</span>
  <span class="p">}</span>

<span class="nl">private:</span>
  <span class="n">EventHandler</span><span class="o">*</span> <span class="n">m_evnetHandler</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**
* @brief ConcreteHandler - Widget
* @details 하위 연결고리들의 인터페이스 정의
*/</span>
<span class="k">class</span> <span class="nc">Widget</span> <span class="o">:</span> <span class="k">public</span> <span class="n">EventHandler</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">Widget</span><span class="p">(</span><span class="n">Widget</span><span class="o">*</span> <span class="n">parent</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">EventHandler</span><span class="p">(</span><span class="n">parent</span><span class="p">),</span> <span class="n">m_parent</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="p">{}</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">Widget</span><span class="p">()</span> <span class="p">{}</span>

<span class="nl">private:</span>
  <span class="n">Widget</span><span class="o">*</span> <span class="n">m_parent</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**
* @brief ConcreteHandler - Window
* @details 요청 받은 내용을 처리하기 위해 연결된 하위 요청 처리자
*/</span>
<span class="k">class</span> <span class="nc">Window</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Widget</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">Window</span><span class="p">(</span><span class="n">EventHandler</span><span class="o">*</span> <span class="n">sub</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">Widget</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">handler</span><span class="p">(</span><span class="n">EVENT</span> <span class="n">eventCode</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">eventCode</span><span class="p">){</span>
    <span class="k">case</span> <span class="n">EVENT</span><span class="o">::</span><span class="n">WINDOW_SHOW</span><span class="p">:</span>

      <span class="p">...</span>

      <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="n">EVENT</span><span class="o">::</span><span class="n">WINDOW_HIDE</span><span class="p">:</span>

      <span class="p">...</span>

      <span class="k">break</span><span class="p">;</span>

    <span class="nl">default:</span>
      <span class="c1">// 해당 클레스에서 처리하지 못하는 요청일때,</span>
      <span class="c1">// 요청을 기반클래스로 전파</span>
      <span class="n">EventHandler</span><span class="o">::</span><span class="n">handler</span><span class="p">(</span><span class="n">eventCode</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="p">...</span>

<span class="p">};</span>


<span class="cm">/**
* @brief ConcreteHandler - Button
* @details 요청 받은 내용을 처리하기 위해 연결된 하위 요청 처리자
*/</span>
<span class="k">class</span> <span class="nc">Button</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Widget</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">Button</span><span class="p">(</span><span class="n">EventHandler</span><span class="o">*</span> <span class="n">sub</span>  <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">Widget</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">handler</span><span class="p">(</span><span class="n">EVENT</span> <span class="n">eventCode</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">eventCode</span><span class="p">){</span>
    <span class="k">case</span> <span class="n">EVENT</span><span class="o">::</span><span class="n">BUTTON_PRESS</span><span class="p">:</span>

      <span class="p">...</span>

      <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="n">EVENT</span><span class="o">::</span><span class="n">BUTTON_RELEASE</span><span class="p">:</span>

      <span class="p">...</span>

      <span class="k">break</span><span class="p">;</span>

    <span class="nl">default:</span>
      <span class="c1">// 해당 클레스에서 처리하지 못하는 요청일때,</span>
      <span class="c1">// 요청을 기반클래스로 전파</span>
      <span class="n">EventHandler</span><span class="o">::</span><span class="n">handler</span><span class="p">(</span><span class="n">eventCode</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="p">...</span>

<span class="p">};</span>

<span class="cm">/**
* @brief ConcreteHandler - Application
* @details 요청 받은 내용을 처리하기 위해 연결된 하위 요청 처리자
*/</span>
<span class="k">class</span> <span class="nc">Application</span> <span class="o">:</span> <span class="k">public</span> <span class="n">EventHandler</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">Application</span><span class="p">(</span><span class="n">EventHandler</span><span class="o">*</span> <span class="n">sub</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">EventHandler</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">handler</span><span class="p">(</span><span class="n">EVENT</span> <span class="n">eventCode</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">eventCode</span><span class="p">){</span>
    <span class="k">case</span> <span class="n">EVENT</span><span class="o">::</span><span class="n">ON_REGIST</span><span class="p">:</span>

      <span class="p">...</span>

      <span class="k">break</span><span class="p">;</span>

    <span class="nl">default:</span>
      <span class="c1">// 해당 클레스에서 처리하지 못하는 요청일때,</span>
      <span class="c1">// 요청을 기반클래스로 전파</span>
      <span class="n">EventHandler</span><span class="o">::</span><span class="n">handler</span><span class="p">(</span><span class="n">eventCode</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="p">...</span>

<span class="p">}</span>


<span class="p">...</span>

  <span class="c1">// 처리에 대한 연결 고리 설정</span>
  <span class="c1">// app --&gt; window --&gt; btn 순으로 전파</span>
  <span class="n">Button</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Button</span><span class="p">();</span>
  <span class="n">Window</span><span class="o">*</span> <span class="n">window</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Winddow</span><span class="p">(</span><span class="n">btn</span><span class="p">);</span>
  <span class="n">Application</span><span class="o">*</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">application</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>

  <span class="c1">// 발생한 이벤트에 대해 처리 요청</span>
  <span class="n">app</span><span class="o">-&gt;</span><span class="n">handler</span><span class="p">(</span><span class="n">EVENT</span><span class="o">::</span><span class="n">WINDOW_HIDE</span><span class="p">);</span>

<span class="p">...</span>

</pre></table></code></div></div><h2 id="related-pattern"><span class="mr-2">Related Pattern</span><a href="#related-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p><em>Chain of Responsibility Pattern</em> 은 <em>Composite Pattern</em>과 함께 대부분 사용되는데, 이때 구성요소의 부모는 후속 처리자 처럼 동작한다.</p><hr /><hr /><p><em>참고</em>. Design Patterns : Elements of Reusable Object-Oriented Software - Erich Gamma</p><hr /></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/design-patterns/'>Design Patterns</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-patterns/" class="post-tag no-text-decoration" >Design Patterns</a> <a href="/tags/behavioral-patterns/" class="post-tag no-text-decoration" >Behavioral Patterns</a> <a href="/tags/chain-of-responsibility/" class="post-tag no-text-decoration" >Chain of Responsibility</a> <a href="/tags/c/" class="post-tag no-text-decoration" >C++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Design Patterns - Chain of Responsibility - My Technical Diary&amp;url=https://issuh.github.io/posts/design_patterns-chain_of_responsibility/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Design Patterns - Chain of Responsibility - My Technical Diary&amp;u=https://issuh.github.io/posts/design_patterns-chain_of_responsibility/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://issuh.github.io/posts/design_patterns-chain_of_responsibility/&amp;text=Design Patterns - Chain of Responsibility - My Technical Diary" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/educative-distributed-system-10/">Distributed Systems - Coordination Patterns</a><li><a href="/posts/educative-distributed-system-04/">Distributed Systems - CAP</a><li><a href="/posts/educative-distributed-system-03/">Distributed Systems - Replication</a><li><a href="/posts/my_project_simpledb/">simpleDB - 메모리</a><li><a href="/posts/ps-hackerrank-01/">HackerRandk - Fraudulent Activity Notifications</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/design_patterns-command/"><div class="card-body"> <em class="timeago small" data-ts="1587504420" > 2020-04-22 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Command</h3><div class="text-muted small"><p> Behavioral Patterns - Command Intent 요청 자체를 캡슐화하는 것이다. 이를 통해 요청이 서로 다른 사용자를 매개변수로 만들고, 요청을 대기시키거나 로깅하여, 되돌릴 수 있는 연산을 지원한다. 작동(Action), 트랜젝션(Transaction) 이라고도 불린다. Utility 수행할 동작을 객체로 매개변수화...</p></div></div></a></div><div class="card"> <a href="/posts/design_patterns-iterator/"><div class="card-body"> <em class="timeago small" data-ts="1587591600" > 2020-04-23 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Iterator</h3><div class="text-muted small"><p> Behavioral Patterns - Iterator Intent 내부 표현부를 노출하지 않고 어떤 집합 객체에 속한 원소들을 순차적으로 접근할수 있는 방법을 제공한다. 커서(Cursor)라고도 불린다. Utility 객체 내부 표현 방식으로 모르고도 집합 객체의 각 원소들에 접근하고 싶을 떄 집합 객체를 순회하는 다양한 ...</p></div></div></a></div><div class="card"> <a href="/posts/design_patterns-mediator/"><div class="card-body"> <em class="timeago small" data-ts="1587679680" > 2020-04-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Mediator</h3><div class="text-muted small"><p> Behavioral Patterns - Mediator Intent 한 집합에 속해있는 객체의 상호작용을 캡슐화하는 객체를 정의한다. 객체들이 서로를 참조하지 않도록 하여 객체 사이의 소결합(Loose Coupling)을 촉진시키며, 개발자가 객체의 상호작용을 독립적으로 다양화 시킬수 있게 만든다. Utility 여러 객체가 잘 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/design_patterns-proxy/" class="btn btn-outline-primary" prompt="Older"><p>Design Patterns - Proxy</p></a> <a href="/posts/design_patterns-command/" class="btn btn-outline-primary" prompt="Newer"><p>Design Patterns - Command</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/ISSuh">ISSuh</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-157715138-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-157715138-1'); }); </script>

<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Chromium - Getting Around the Chromium Source Code Directory Structure" /><meta property="og:locale" content="en" /><meta name="description" content="Getting Around the Chromium Source Code Directory Structure" /><meta property="og:description" content="Getting Around the Chromium Source Code Directory Structure" /><link rel="canonical" href="https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/" /><meta property="og:url" content="https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/" /><meta property="og:site_name" content="My Technical Diary" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-24T08:23:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Chromium - Getting Around the Chromium Source Code Directory Structure" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-07-24T08:23:00+09:00","datePublished":"2020-07-24T08:23:00+09:00","description":"Getting Around the Chromium Source Code Directory Structure","headline":"Chromium - Getting Around the Chromium Source Code Directory Structure","mainEntityOfPage":{"@type":"WebPage","@id":"https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/"},"url":"https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/"}</script><title>Chromium - Getting Around the Chromium Source Code Directory Structure | My Technical Diary</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="My Technical Diary"><meta name="application-name" content="My Technical Diary"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profile.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">My Technical Diary</a></div><div class="site-subtitle font-italic">ISSuh's tech blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/aboutme/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ISSuh" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yoyus5','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Chromium - Getting Around the Chromium Source Code Directory Structure</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Chromium - Getting Around the Chromium Source Code Directory Structure</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/ISSuh">ISSuh</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1595546580" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-07-24 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2387 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><h1 id="getting-around-the-chromium-source-code-directory-structure">Getting Around the Chromium Source Code Directory Structure</h1><h2 id="high-level-overview"><span class="mr-2">High-level overview</span><a href="#high-level-overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Chromium is separated into two main parts (excluding other libraries): the browser and the renderer (which includes Blink, the web engine). The browser is the main process and represents all the UI and I/O. The renderer is the (often) per-tab sub-process that is driven by the browser. It embeds Blink to do layout and rendering.</p><p>You will want to read and become familiar with our multi-process architecture and how Chromium displays web pages.</p><h2 id="top-level-projects"><span class="mr-2">Top-level projects</span><a href="#top-level-projects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>When you check out Chromium, you will notice a number of top-level directories. These projects are as follows:</p><ul><li><strong>android_webview</strong> : Provides a facade over src/content suitable for integration into the android platform. NOT intended for usage - <strong>individual</strong> android applications (APK). More information about the Android WebView source code organization.<li><strong>apps</strong> : Chrome packaged apps.<li><strong>base</strong> : Common code shared between all sub-projects. This contains things like string manipulation, generic utilities, etc. - <strong>things</strong> here only if it must be shared between more than one other top-level project.<li><strong>breakpad</strong> : Google’s open source crash reporting project. This is pulled directly from Google Code’s Subversion repository.<li><strong>build</strong> : Build-related configuration shared by all projects.<li><strong>cc</strong> : The Chromium compositor implementation.<li><strong>chrome</strong> : The Chromium browser (see below).<li><strong>chrome</strong> /test/data: Data files for running certain tests.<li><strong>components</strong> : directory for components that have the Content Module as the uppermost layer they depend on.<li><strong>content</strong> : The core code needed for a multi-process sandboxed browser (see below). More information about why we have separated - <strong>this</strong> code.<li><strong>device</strong> : Cross-platform abstractions of common low-level hardware APIs.<li><strong>net</strong> : The networking library developed for Chromium. This can be used separately from Chromium when running our simple - <strong>in</strong> the webkit repository. See also chrome/common/net.<li><strong>sandbox</strong> : The sandbox project which tries to prevent a hacked renderer from modifying the system.<li><strong>skia + third_party/skia</strong> : Google’s Skia graphics library. Our additional classes in ui/gfx wrap Skia.<li><strong>sql</strong> : Our wrap around sqlite.<li><strong>testing</strong> : Contains Google’s open-sourced GTest code which we use for unit testing.<li><strong>third_party</strong> : 200+ small and large “external” libraries such as image decoders, compression libraries and the web engine Blink (here because it inherits license limitations from WebKit). Adding new packages. …/blink/renderer: The web engine responsible for turning HTML, CSS and scripts into paint commands and other state changes.<li><strong>tools</strong><li><strong>ui/gfx</strong> : Shared graphics classes. These form the base of Chromium’s UI graphics.<li><strong>ui/views</strong> : A simple framework for doing UI development, providing rendering, layout and event handling. Most of the browser UI implemented in this system. This directory contains the base objects. Some more browser-specific objects are in chrome/browser/ui views.<li><strong>url</strong> : Google’s open source URL parsing and canonicalization library.<li><strong>v8</strong> : The V8 Javascript library. This is pulled directly from Google Code’s Subversion repository.</ul><p>For historical reasons, there are some small top level directories. Going forward, the guidance is that new top level directories are for applications (e.g. Chrome, Android WebView, Ash). Even if these applications have multiple executables, the code should be in subdirectories of the application</p><p>Here’s a slightly dated diagram of the dependencies. In particular, WebKit is replaced by blink/renderer. A module that is lower can’t include code from a higher module directly (i.e. content can’t include a header from chrome), but talks to it using embedder APIs.</p><p><img data-src="https://www.chromium.org/_/rsrc/1308680092356/developers/how-tos/getting-around-the-chrome-source-code/Content.png" alt="picture" data-proofer-ignore></p><h2 id="quick-reference-for-the-directory-tree-under-content"><span class="mr-2">Quick reference for the directory tree under “content/”</span><a href="#quick-reference-for-the-directory-tree-under-content" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>browser: The backend for the application which handles all I/O and communication with the child processes . This talks to the renderer to manage web pages.
common: Files shared between the multiple processes (i.e. browser and renderer, renderer and plugin, etc...). This is the code specific to Chromium (and not applicable to being in base).
gpu: Code for the GPU process, which is used for 3D compositing and 3D APIs.
plugin: Code for running browser plugins in other processes.
ppapi_plugin: Code for the Pepper plugin process.
renderer: Code for the subprocess in each tab. This embeds WebKit and talks to browser for I/O.
utility: Code for running random operations in a sandboxed process.  The browser process uses it when it wants to run an operation on untrusted data.
worker: Code for running HTML5 Web Workers.
</pre></table></code></div></div><h2 id="quick-reference-for-the-directory-tree-under-chrome"><span class="mr-2">Quick reference for the directory tree under “chrome/”</span><a href="#quick-reference-for-the-directory-tree-under-chrome" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre>app: The "app" is the most basic level of the program. It is run on startup, and dispatches to either the browser or renderer code depending on which capabilities the current process is in. It contains the projects for chrome.exe and chrome.dll. You won't generally need to change this stuff except for resources like images and strings.
    locales: Projects for building localized DLLs.
    resources: Icons and cursors.
    theme: Images for the theme of the window. 
browser: The frontend including the main window, UI, and the backend for the application which handles all I/O and storage. This talks to the renderer to manage web pages.
    ui model, view and controller code for UI features and functionality
common: Files shared between the browser and the renderer that is specific to the Chrome module.
    net: Some Chromium-specific stuff on top of the net top-level module. This should be merged with browser/net.
installer: Source files and projects for making the installer (MSI package).
renderer: Chrome specific code that runs in the renderer process.  This adds Chrome features like autofill, translate etc to the content module.
test:
    automation: Used by tests to drive the browser UI, for example, in test/ui, test/startup, etc. This communicates with browser/automation in the browser.
    page_cycler: Code for running page cycler tests (for performance measurement). See tools/perf/dashboard.
    reliability: Reliability tests for distributed testing of page loads for reliability metrics and crash finding.
    selenium: Code for running the selenium tests, which is a third-party test suite for Ajaxy and JavaScript stuff. See test/third_party/selenium_core.
    startup: Tests for measuring startup performance. See tools/perf/dashboard and tools/test/reference_build.
    ui: UI tests for poking at the browser UI, opening tabs, etc. It uses test/automation for doing most operations.
    unit: The base code for the unit tests. The test code for individual tests is generally alongside the code it is testing in a *_unittest.cc file. 
third_party: Third party libraries that are specific to Chromium. Some other third party libraries are in the top-level third_party library.
tools
    build: Tools and random stuff related to building.
        buildbot: Buildbot configuration. Buildbot manages our automated build system. See third_pary/buildbot.
        win: Windows build stuff, including some .vsprops files used for project properties and scripts.
    memory: Tools for memory stuff. Currently includes gflags for setting page heap options.
    perf/dashboard: Code for converting performance logs (for example test/startup_test) into data and graphs.
    profiles: Generator for random history data. Used to make test profiles.
</pre></table></code></div></div><h2 id="a-personal-learning-plan"><span class="mr-2">A personal learning plan</span><a href="#a-personal-learning-plan" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Eventually you’ll have your build setup, and want to get to work. In a perfect world, we would have all the time we needed to read every line of code and understand it before writing our first line of code. In practice, we’d have a hard time reading just the checkins that happen in one day if we did nothing else, so none of us will ever be able to read all of the code. So, what can we do? We suggest you develop your own plan for learning what you need, here are some suggested starting points.</p><p>Fortunately for us, Chromium has some top quality design docs here. While these can go a bit stale (for instance, when following along, you may find references to files that have been moved or renamed or refactored out of existence), it is awesome to be able to comprehend the way that the code fits together overall.</p><p>Read the most important dev docs multi-process-architecture displaying-a-web-page-in-chrome inter-process-communication threading</p><p>See if your group has any startup docs There may be some docs that people working on the same code will care about while others don’t need to know as much detail.</p><p>Learn some of the code idioms: important-abstractions-and-data-structures smart-pointer-guidelines chromium-string-usage</p><p>Later, as time permits, skim all the design docs, reading where it seems relevant. Get good at using code search (or your code browsing tool of choice) Learn who to ask how the code works hints here. Debug into the code you need to learn, with a debugger if you can, log statements and grepping if you cannot. Look at the differences in what you need to understand and you currently understand. For instance, if your group does a lot of GUI programming, then maybe you can invest time in learning GTK+, Win32, or Cocoa programming.</p><h3 id="code-paths-for-common-operations"><span class="mr-2">Code paths for common operations</span><a href="#code-paths-for-common-operations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>There is additional information and more examples on how Chromium displays web pages.</p><h4 id="application-startup"><span class="mr-2">Application startup</span><a href="#application-startup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li>Our WinMain function is in chrome/app/main.cc, and is linked in the chrome project.<li>WinMain launches the Google Update Client, which is the installer/autoupdater. It will find the subdirectory for the current version, and load chrome.dll from there.<li>It calls ChromeMain in the newly loaded library, which is in chrome_main.cc in the chrome_dll project. ChromeMain does initialization for common components, and then forwards to either RendererMain in chrome/renderer/renderer_main.cc if the command line flag indicates that this should be a subprocess, or BrowserMain in chrome/browser/browser_main.cc if not to load a new copy of the application.<li>Since this is startup, we’re launching the browser.<li>BrowserMain does common browser initialization. It has different modes for running installed webapps, connecting to the automation system if the browser is being tested, etc.<li>It calls LaunchWithProfile in browser_init.cc which creates a new Browser object in chrome/browser/ui/browser.cc. This object encapsulates one toplevel window in the application. The first tab is appended at this time.</ol><h4 id="tab-startup--initial-navigation"><span class="mr-2">Tab startup &amp; initial navigation</span><a href="#tab-startup--initial-navigation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li>Browser::AddTab in chrome/browser/ui/browser.cc is called to append a new tab.<li>It will create a new TabContents object from browser/tab_contents/tab_contents.cc<li>TabContents creates a RenderViewHost (chrome/browser/renderer_host/render_view_host.cc) via the RenderViewHostManager’s Init function in chrome/browser/tab_contents/render_view_host_manager.cc). Depending on the SiteInstance, the RenderViewHost either spawns a new renderer process, or re-uses an existing RenderProcessHost. RenderProcessHost is the object in the browser that represents a single renderer subprocess.<li>The NavigationController in chrome/browser/tab_contents/navigation_controller.cc which is owned by the tab contents, is instructed to navigate to the URL for the new tab in NavigationController::LoadURL. “Navigating from the URL bar” from step 3 onward describes what happens from this point.</ol><h4 id="navigating-from-the-url-bar"><span class="mr-2">Navigating from the URL bar</span><a href="#navigating-from-the-url-bar" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>When the user types into or accepts an entry in the URL bar, the autocomplete edit box determines the final target URL and passes that to AutocompleteEdit::OpenURL. (This may not be exactly what the user typed - for example, an URL is generated in the case of a search query.)
The navigation controller is instructed to navigate to the URL in NavigationController::LoadURL.
The NavigationController calls TabContents::Navigate with the NavigationEntry it created to represent this particular page transition. It will create a new RenderViewHost if necessary, which will cause creation of a RenderView in the renderer process. A RenderView won't exist if this is the first navigation, or if the renderer has crashed, so this will also recover from crashes.
Navigate forwards to RenderViewHost::NavigateToEntry. The NavigationController stores this navigation entry, but it is marked as "pending" because it doesn't know for sure if the transition will take place (maybe the host can not be resolved).
RenderViewHost::NavigateToEntry sends a ViewMsg_Navigate to the new RenderView in the renderer process.
When told to navigate, RenderView may navigate, it may fail, or it may navigate somewhere else instead (for example, if the user clicks a link). RenderViewHost waits for a ViewHostMsg_FrameNavigate from the RenderView.
When the load is "committed" by WebKit (the server responded and is sending us data), the RenderView sends this message, which is handled in RenderViewHost::OnMsgNavigate.
The NavigationEntry is updated with the information on the load. In the case of a link click, the browser has never seen this URL before. If the navigation was browser-initiated, as in the startup case, there may have been redirects that have changed the URL.
The NavigationController updates its list of navigations to account for this new information.
</pre></table></code></div></div><h4 id="navigations-and-session-history"><span class="mr-2">Navigations and session history</span><a href="#navigations-and-session-history" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></h4><p>Each NavigationEntry stores a page ID and a block of history state data. The page ID is used to uniquely identify a page load, so we know which NavigationEntry it corresponds to. It is assigned when the page is committed commit, so a pending NavigationEntry will have a page ID of -1. The history state data is simply a WebCore::HistoryItem serialized to a string. Included on this item are things like the page URL, subframe URLs, and form data.</p><ol><li>When the browser initiates the request (typing in the URL bar, or clicking back/forward/reload)<ul><li>A WebRequest is made representing the navigation, along with extra information like a page ID for bookkeeping. New navigations have an ID of -1. Navigations to old entries have the ID assigned to the NavigationEntry when the page was first visited. This extra information will be queried later when the load commits.<li>The main WebFrame is told to load the new request.</ul><li>When the renderer initiates the request (user clicks a link, javascript changes the location, etc): WebCore::FrameLoader is told to load the request via one of its bajillion varied load methods.<li>In either case, when the first packet from the server is received, the load is committed (no longer “pending” or “provisional”).<li>If this was a new navigation, WebCore will create a new HistoryItem and add it to the BackForwardList, a WebCore class. In this way, we can differentiate which navigations are new, and which are session history navigations.<li>RenderView::DidCommitLoadForFrame handles the commit for the load. Here, the previous page’s state is stored in session history, via the ViewHostMsg_UpdateState message. This will tell the browser to update the corresponding NavigationEntry (identified by RenderView’s current page ID) with the new history state.<li>RenderView’s current page ID is updated to reflect the committed page. For a new navigation, a new unique page ID is generated. For a session history navigation, it will be the page ID originally assigned when it was first visited, which we had stored on the WebRequest when initiating the navigation.<li>A ViewHostMsg_FrameNavigate message is sent to the browser, updating the corresponding NavigationEntry (identified by RenderView’s newly updated page ID) with the new URL and other information.</ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/chromium/'>Chromium</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/chromium/" class="post-tag no-text-decoration" >Chromium</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Chromium - Getting Around the Chromium Source Code Directory Structure - My Technical Diary&amp;url=https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Chromium - Getting Around the Chromium Source Code Directory Structure - My Technical Diary&amp;u=https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://issuh.github.io/posts/chromium_Getting_Around_the_Chromium_Source_Code_Directory_Structure/&amp;text=Chromium - Getting Around the Chromium Source Code Directory Structure - My Technical Diary" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/educative-distributed-system-10/">Distributed Systems - Coordination Patterns</a><li><a href="/posts/educative-distributed-system-04/">Distributed Systems - CAP</a><li><a href="/posts/educative-distributed-system-03/">Distributed Systems - Replication</a><li><a href="/posts/my_project_simpledb/">simpleDB - 메모리</a><li><a href="/posts/ps-hackerrank-01/">HackerRandk - Fraudulent Activity Notifications</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/chromium_network_service/"><div class="card-body"> <em class="timeago small" data-ts="1697205480" > 2023-10-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Chromium - Netowk</h3><div class="text-muted small"><p> Chromium의 Network Service Network Process(Utility Process) Class Diagram TLS Handshaking Sequence https://www.chromium.org/developers/design-documents/network-stack/ https://docs.google.co...</p></div></div></a></div><div class="card"> <a href="/posts/chromium_Multi-process_Architecture/"><div class="card-body"> <em class="timeago small" data-ts="1595375760" > 2020-07-22 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Chromium - Multi-process Architecture</h3><div class="text-muted small"><p> Multi-process Architecture This document describes Chromium’s high-level architecture. Problem 절대 Crash 나 hang이 발생하지 않는 Rendering engine을 구성하는것은 거의 불가능 하다. 완벽하게 안전한 Rendering engine을 구성하는 것 또한 거...</p></div></div></a></div><div class="card"> <a href="/posts/chromium_/"><div class="card-body"> <em class="timeago small" data-ts="1595375760" > 2020-07-22 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Chromium - Multi-process Architecture</h3><div class="text-muted small"><p> Multi-process Architecture This document describes Chromium’s high-level architecture. Problem 절대 Crash 나 hang이 발생하지 않는 Rendering engine을 구성하는것은 거의 불가능 하다. 완벽하게 안전한 Rendering engine을 구성하는 것 또한 거...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ps-leetcode-79/" class="btn btn-outline-primary" prompt="Older"><p>LeetCode - 79. Word Search</p></a> <a href="/posts/ps-leetcode-797/" class="btn btn-outline-primary" prompt="Newer"><p>LeetCode - 797. All Paths From Source to Target</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/ISSuh">ISSuh</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-157715138-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-157715138-1'); }); </script>

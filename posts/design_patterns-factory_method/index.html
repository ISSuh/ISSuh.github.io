<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Design Patterns - Factory Method" /><meta property="og:locale" content="en" /><meta name="description" content="Creational Patterns - Factory Method" /><meta property="og:description" content="Creational Patterns - Factory Method" /><link rel="canonical" href="https://issuh.github.io/posts/design_patterns-factory_method/" /><meta property="og:url" content="https://issuh.github.io/posts/design_patterns-factory_method/" /><meta property="og:site_name" content="My Technical Diary" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-11T21:04:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Design Patterns - Factory Method" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-05T12:33:07+09:00","datePublished":"2020-04-11T21:04:00+09:00","description":"Creational Patterns - Factory Method","headline":"Design Patterns - Factory Method","mainEntityOfPage":{"@type":"WebPage","@id":"https://issuh.github.io/posts/design_patterns-factory_method/"},"url":"https://issuh.github.io/posts/design_patterns-factory_method/"}</script><title>Design Patterns - Factory Method | My Technical Diary</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="My Technical Diary"><meta name="application-name" content="My Technical Diary"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/profile.jpeg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">My Technical Diary</a></div><div class="site-subtitle font-italic">ISSuh's tech blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/aboutme/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/ISSuh" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yoyus5','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Design Patterns - Factory Method</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Design Patterns - Factory Method</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/ISSuh">ISSuh</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1586606640" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-04-11 </em> </span> <span> Updated <em class="timeago" data-ts="1646451187" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-05 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1666 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><h1 id="creational-patterns---factory-method">Creational Patterns - Factory Method</h1><h2 id="intent"><span class="mr-2">Intent</span><a href="#intent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p>객페를 생성하기 위해 인터페이스를 정의하지만, 어떤 클래스의 인스턴스를 생성할지에 대한 결정은 서브클래스가 하도록 한다.</p><p>때때로 <em>Factory Method</em>는 <em>Virtual Constructor</em>라고도 불린다.</p><h2 id="utility"><span class="mr-2">Utility</span><a href="#utility" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><ul><li>어떤 클래스가 자신이 생성해야 하는 객체의 클래스를 예측할 수 없을 떄<li>생성할 객체를 기술하는 책임을 자신의 서브클래스가 지정했으면 할 떄<li>객체 생성의 책임을 몇개의 보조 서브클래스 가운데 하나에게 위임하고, 어떤 서브클래스가 위임자인지에 대한 정보를 최대한 숨기고 싶을 떄</ul><h2 id="structure"><span class="mr-2">Structure</span><a href="#structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p><img data-src="https://online.visual-paradigm.com/repository/images/7b40f65b-07b8-4758-8d64-ed22a0f4fddf.png" alt="example" data-proofer-ignore></p><h3 id="structure-example"><span class="mr-2">Structure Example</span><a href="#structure-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/fmeth049.gif" alt="example" data-proofer-ignore></p><h3 id="elements"><span class="mr-2">Elements</span><a href="#elements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ul><li><strong>Creator(Application)</strong><ul><li><em>Product</em> 객체 생성을 위해 <em>Factory Method</em>를 호출<li><em>Product</em> 타입의 객체를 반환하는 <em>Factory Method</em>를 선언<li><em>Creator</em> 클래스는 <em>Factory Method</em>를 기본적으로 구현하고, 이 구현에서는 <em>ConcreteProduct</em> 객체를 반환</ul><li><strong>ConcreteCreator(MyApplication)</strong><ul><li><em>Factory Method</em>를 재정의하여 <em>ConcreteProduct</em> 인스턴스를 반환</ul><li><strong>Product(Document)</strong><ul><li><em>Factory Method</em>가 생성하는 객체의 인터페이스를 정의</ul><li><strong>ConcreteProduct(MyDocument)</strong><ul><li><em>Product</em> 클래스에 정의된 인터페이스를 구현</ul></ul><p><em>Creator</em>는 자신의 서브클래스를 통해 실제 필요한 <em>Factory Method</em>를 정의하여 적절한 <em>ConcreteProduct</em>의 인스턴스를 반환할 수 있게 한다.</p><h2 id="feature"><span class="mr-2">Feature</span><a href="#feature" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><ul><li><em>Factory Method Pattern</em>은 응용프로그램에 국한된 클래스가 코드에 종속되지 않도록 한다.<ul><li>응용프로그램은 <em>Product</em> 클래스에 정의된 인터페이스만 동작하도록 코드를 작성기 때문에 사용자가 정의한 어떠한 <em>ConcreteProduct</em> 클래스와도 동작할수 있게 한다.</ul><li><em>ConcreteProduct</em> 객체 하나만 생성하려 할때도 <em>Creator</em> 클래스를 상속하여 서브클래스를 만들어야 한다.<li>서브클래스에 대한 <em>훅 메서드(Hook Method)</em> 를 제공한다.<ul><li>객체를 직접 생성하는 것보다 <em>Factort Method</em>로 클래스 내부에서 객체를 생성하여 응용성을 높힌다.<li><em>Factort Method Pattern</em>에서는 객체별로 서로 다른 버전을 제공하는 훅 기능을 서브클래스에 정의한다.</ul><li><strong>병렬적인 클래스 계통(Connects parallel class hierarchies)</strong> 을 연결하는 역할을 담당한다.<ul><li><em>병렬적 클래스 계통</em>은 클래스가 자신의 책임을 분리된 다른 클래스에 위임할때 발생한다.<li>사용자와 상호작용을 구현하고 특정한 조작에 관련된 상태를 추적, 저장하는 별도의 <em>Manipulator</em> 객체를 사용하고, 서로 다른 <em>Manipulator</em> 클래스의 서브클래스를 사용하여 특정한 상호작용을 처리하도록 한다.</ul></ul><p><img data-src="https://www.cs.unc.edu/~stotts/GOF/hires/Pictures/fmeth048.gif" alt="example" data-proofer-ignore></p><h2 id="implementation"><span class="mr-2">Implementation</span><a href="#implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p><em>Factort Method Pattern</em>을 구현할떄는 다음과 같은 사항을 고려해야 한다.</p><h3 id="구현방법은-크게-두가지이다"><span class="mr-2">구현방법은 크게 두가지이다</span><a href="#구현방법은-크게-두가지이다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><ol><li><em>Creator</em> 클래스를 추상 클래스로 정의하고, 정의한 <em>Factory Method</em>에 대한 구현은 제공하지 않는다.<li><em>Creator</em>가 구체 클래스 이고, <em>Factory Method</em>에 대한 기본 구현을 제공한다.</ol><h3 id="factory-method를-매개변수화-한다"><span class="mr-2"><em>Factory Method</em>를 매개변수화 한다</span><a href="#factory-method를-매개변수화-한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><em>Factory Method</em>갸 매개변수로 받아서 어떤 종류의 제품을 생성할지 식별하게 한다. 이때 생성하는 모든 객체는 <em>Product</em>라는 인터페이스를 모두 만족해야 한다.</p><p>매개변수회된 <em>Factory Method</em>는 다음과 같은 일반적인 형태를 가진다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Creator</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="n">Product</span><span class="o">*</span> <span class="n">Create</span><span class="p">(</span><span class="n">ProductId</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 나머지 Product에 대해서도 이렇게 반복한다.</span>
    <span class="k">if</span><span class="p">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">MINE</span><span class="p">)</span>  <span class="k">return</span> <span class="k">new</span> <span class="n">MyProduct</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">YOURS</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">YourProduct</span><span class="p">;</span>

    <span class="p">...</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><p>매개변수회된 <em>Factory Method</em>를 오버라이드 하면, Creator 클래스가 생성하는 제품을 쉽게 확장하거나 변경할수 있다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">MyCreator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Creator</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">Product</span><span class="o">*</span> <span class="n">Create</span><span class="p">(</span><span class="n">ProductId</span> <span class="n">id</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
    <span class="c1">// YOURS와 MINE을 바꿀떄</span>
    <span class="k">if</span><span class="p">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">MINE</span><span class="p">)</span>  <span class="k">return</span> <span class="k">new</span> <span class="n">YourProduct</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">YOURS</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">MyProduct</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">id</span> <span class="o">==</span> <span class="n">THEIRS</span><span class="p">)</span>  <span class="k">return</span> <span class="k">new</span> <span class="n">TheirProduct</span><span class="p">;</span>

    <span class="c1">// MINE, YOURS, THEIRS 만 처리되도록 하였으므로,</span>
    <span class="c1">// 이외의 것을 처리하기 위해 부모클래스에게 요청</span>
    <span class="k">return</span> <span class="n">Creator</span><span class="o">::</span><span class="n">Create</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="템플릿을-사용하여-서브클래싱을-피한다"><span class="mr-2">템플릿을 사용하여 서브클래싱을 피한다</span><a href="#템플릿을-사용하여-서브클래싱을-피한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p><em>Factory Method</em>를 쓰면 생기는 잠재적인 문제중 하나는 그냥 <em>Product</em> 클래스 하나를 추가 할 때마다 서브클래싱을 해야 한다는 점이다. 이를 해결하기 위해 <em>Creator</em> 클래스의 서브클래스가 되는 <em>템플릿 클래스</em>정의하고 이것이 <em>Product</em> 클래스로 매개변수화되도록 만드는 것이다.</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Creator</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="n">Product</span><span class="o">*</span> <span class="n">CreateProduct</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">TheProduct</span><span class="p">&gt;</span>
<span class="k">class</span> <span class="nc">StandardCreator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Creator</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="c1">// Creator를 상속받는 *Factory Method*를 구현할</span>
  <span class="c1">// 서브클래스를 템플릿 클래스로 정의</span>
  <span class="n">Product</span><span class="o">*</span> <span class="n">CreateProduct</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="n">TheProduct</span><span class="p">;</span> <span class="p">};</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">MyProduct</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Product</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">MyProduct</span><span class="p">();</span>
  <span class="p">...</span>

<span class="p">};</span>

<span class="p">...</span>

  <span class="n">StandardCreator</span><span class="o">&lt;</span><span class="n">MyProduct</span><span class="o">&gt;</span> <span class="n">myCreator</span><span class="p">;</span>

<span class="p">...</span>
</pre></table></code></div></div><h3 id="implementation-example"><span class="mr-2">Implementation Example</span><a href="#implementation-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre><td class="rouge-code"><pre><span class="cm">/**
* @brief Product(AbstractProduct) - Display
*/</span>
<span class="k">class</span> <span class="nc">Display</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">Button</span><span class="p">()</span> <span class="p">{}</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">show</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**
* @brief ConcreteProduct - WinDisplay
*/</span>
<span class="k">class</span> <span class="nc">WinDisplay</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Display</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="kt">void</span> <span class="n">show</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"WIN"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
* @brief ConcreteProduct - OSXDisplay
*/</span>
<span class="k">class</span> <span class="nc">OSXDisplay</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Display</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="kt">void</span> <span class="n">show</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"OSX"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/**
* @brief Creator(AbstractCreator)
*/</span>
<span class="k">class</span> <span class="nc">DisplayCreator</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="k">virtual</span> <span class="o">~</span><span class="n">Creator</span><span class="p">()</span> <span class="p">{}</span>

  <span class="c1">// Factory Method</span>
  <span class="k">virtual</span> <span class="n">Display</span><span class="o">*</span> <span class="n">CreateDisplay</span><span class="p">(</span><span class="n">OSType</span> <span class="n">type</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**
* @brief ConcreteCreator
*/</span>
<span class="k">class</span> <span class="nc">MyDisplayCreator</span> <span class="o">:</span> <span class="k">public</span> <span class="n">DisplayCreator</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="c1">// Factory Method 구현</span>
  <span class="n">Display</span><span class="o">*</span> <span class="n">CreateDisplay</span><span class="p">(</span><span class="n">OSType</span> <span class="n">type</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">type</span><span class="p">){</span>
      <span class="k">case</span> <span class="n">OS_WIN</span><span class="p">:</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="k">new</span> <span class="n">WinDisplay</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">case</span> <span class="n">OS_OSX</span><span class="p">:</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">OSXDisplay</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nl">default:</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Display</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="p">...</span>

  <span class="n">MyDisplayCreator</span> <span class="n">displayCreator</span><span class="p">;</span>
  <span class="n">Display</span><span class="o">*</span> <span class="n">display</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">WinDisplay</span><span class="o">&gt;</span><span class="p">(</span><span class="n">displayCreator</span><span class="p">.</span><span class="n">CreateDisplay</span><span class="p">(</span><span class="n">OS_WIN</span><span class="p">));</span>

  <span class="n">display</span><span class="o">-&gt;</span><span class="n">show</span><span class="p">();</span>

<span class="p">...</span>
</pre></table></code></div></div><h2 id="related-pattern"><span class="mr-2">Related Pattern</span><a href="#related-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><hr /><p><em>Abstract Factory Pattern</em>은 이 <em>Factory Method</em>를 이용해서 구현할 때가 많다.</p><p><em>Factory Method</em>는 <em>Template Method Pattern</em> 에서 사용될 떄가 많다.</p><p><em>Prototype Pattern</em>은 <em>Creator</em> 클래스의 상속이 필요하지 않다. 그러나 <em>Product</em> 클래스에 정의된 초기화 연산은 필요하다. <em>Creator</em> 클래스는 객체의 초기화를 위해 초기화 연산을 사용하지만, <em>Factory Method</em>는 이러한 연산이 필요하지 않다.</p><hr /><hr /><p><em>참고</em>. Design Patterns : Elements of Reusable Object-Oriented Software - Erich Gamma</p><hr /></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/design-patterns/'>Design Patterns</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-patterns/" class="post-tag no-text-decoration" >Design Patterns</a> <a href="/tags/creational-patterns/" class="post-tag no-text-decoration" >Creational Patterns</a> <a href="/tags/factory-method/" class="post-tag no-text-decoration" >Factory Method</a> <a href="/tags/c/" class="post-tag no-text-decoration" >C++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Design Patterns - Factory Method - My Technical Diary&amp;url=https://issuh.github.io/posts/design_patterns-factory_method/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Design Patterns - Factory Method - My Technical Diary&amp;u=https://issuh.github.io/posts/design_patterns-factory_method/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://issuh.github.io/posts/design_patterns-factory_method/&amp;text=Design Patterns - Factory Method - My Technical Diary" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/educative-distributed-system-10/">Distributed Systems - Coordination Patterns</a><li><a href="/posts/educative-distributed-system-04/">Distributed Systems - CAP</a><li><a href="/posts/educative-distributed-system-03/">Distributed Systems - Replication</a><li><a href="/posts/my_project_simpledb/">simpleDB - 메모리</a><li><a href="/posts/ps-hackerrank-01/">HackerRandk - Fraudulent Activity Notifications</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/design_patterns-abstract_factory/"><div class="card-body"> <em class="timeago small" data-ts="1586380560" > 2020-04-09 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Abstract Factory</h3><div class="text-muted small"><p> Creational Patterns - Abstract Factory Intent 상세화된 서브클래스를 정의하지 않고도 서로 관련성이 있거나 독립적인 여러 객체의 군을 생성하기 위한 인터페이스를 제공 Utility 객체가 생성되거나 구성, 표현되는 방식과 무관하게 시스템을 독립적으로 만들고자 할때 여러 제품들중 하나를 선택해서 시스템을...</p></div></div></a></div><div class="card"> <a href="/posts/design_patterns-builder/"><div class="card-body"> <em class="timeago small" data-ts="1586465520" > 2020-04-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Builder</h3><div class="text-muted small"><p> Creational Patterns - Builder Intent 복잡한 객체를 생성하는 방법과 표현하는 방법을 정의하는 클래스를 별도로 분리하여, 서로 다른 표현이라도 이를 생성할 수 있는 동일한 절차를 제공할수 있도록 함 Utility 복합 객체를 생성하는 알고리즘이 객체를 구성하는 요소 부분과 이들을 조립하는 방법에 독립적일 때 ...</p></div></div></a></div><div class="card"> <a href="/posts/design_patterns-prototype/"><div class="card-body"> <em class="timeago small" data-ts="1586617440" > 2020-04-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Patterns - Prototype</h3><div class="text-muted small"><p> Creational Patterns - Prototype Intent 원형이 되는 인스턴스를 사용하여 생성할 객체의 종류를 명시하고, 이렇게 만든 견본을 복사해서 새로운 객체를 생성한다. Utility 인트턴스화할 클래스를 런타임에 지정할(동적 로딩) 떄 제품 클래스 계통과 병렬적으로 만드는 Factory Class 피하고 싶을...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/effective_c++_item_2/" class="btn btn-outline-primary" prompt="Older"><p>Effective C++ - Item.2</p></a> <a href="/posts/design_patterns-prototype/" class="btn btn-outline-primary" prompt="Newer"><p>Design Patterns - Prototype</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/ISSuh">ISSuh</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ps/">PS</a> <a class="post-tag" href="/tags/leetcode/">Leetcode</a> <a class="post-tag" href="/tags/programmers/">Programmers</a> <a class="post-tag" href="/tags/spring-framework/">Spring Framework</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/hash/">Hash</a> <a class="post-tag" href="/tags/database/">DataBase</a> <a class="post-tag" href="/tags/tree/">Tree</a> <a class="post-tag" href="/tags/array/">Array</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-157715138-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-157715138-1'); }); </script>
